@using System.Globalization
@using ProjectManager.Application.Common.Extensions
@using ProjectManager.Application.Common.Interfaces
@using ProjectManager.Application.Dictionaries
@using ProjectManager.Application.Settlements.Queries.GetCostSummary

@inject ICurrentUserService currentUserService
@model CostSummaryVm

@{
    var locale = CultureInfo.CurrentUICulture.TwoLetterISOLanguageName;

    var roles = User.IsInRole(RolesDict.Administrator) || User.IsInRole(RolesDict.Kierownik);
    var canDelete = User.IsInRole(RolesDict.Administrator);
}

@section Styles {
    <partial name="Styles/_DataTablesStyles" />
    <partial name="Styles/_SelectStyles" />
}

<input type="hidden" id="ProjectId" name="ProjectId" value="@Model.Project.Id" />

<div class="card shadow-sm mb-4 border-0">

    <!-- HEADER -->
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center mt-3">
        <h4 class="mb-0 d-flex align-items-center">
            <a class="edit-link text-white" href="/Project/Project?id=@Model.Project.Id">
                <i class="fas fa-folder-open me-2"></i>
                @Model.Project.Name
            </a>
        </h4>
    </div>
</div>

<!-- CONTENT -->
<div id="workScopeContainer">
    <partial name="_WorkScopeSummaryContent" model="Model" />
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#scopeCostsTable').DataTable({
                paging: true,
                searching: false,
                info: false,
                ordering: true,
                language: {
                    url: `/lib/datatables/lang/${'@locale'}.json`
                }
            });
        });
    </script>
}
